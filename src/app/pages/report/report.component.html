<ion-content>
  <div class="p-4">
    <form [formGroup]="form" class="grid md:grid-cols-3 grid-cols-1 gap-2">
      <app-select [parentForm]="form" label="ผู้ขาย" formControlName="seller" placeholder="กรุณาเลือกผู้ขาย"
        [multiple]="false" [options]="sellers" (selectChange)="filteringWorkSheetBySeller($event)"></app-select>
      <app-select [parentForm]="form" label="ผู้ออกแบบ" formControlName="graphic" placeholder="กรุณาเลือกผู้ออกแบบ"
        [multiple]="false" [options]="designers" (selectChange)="filteringWorkSheetByGraphic($event)"></app-select>
      <app-input [parentForm]="form" label="ค้นหาใบงาน" formControlName="text_search" placeholder="กรุณากรอกเลขที่ใบงาน"
        (inputChange)="onWorkSheetSearchChange($event)"></app-input>
    </form>
    <div class="status-container pt-4">
      <div *ngFor="let status of statusKeys" class="status-box" [class.selected]="currentStatus === statusName(status)"
        (click)="filteringWorkSheetByStatus(status)">
        <p>{{ statusName(status) }}</p>
        <p>{{ statusCount[status] }}</p>
      </div>
    </div>
  </div>
  <ngx-datatable class="flex w-full. material expandable" [columnMode]="'force'" [rows]="filterWorkSheet" [limit]="10"
    rowHeight="auto" [headerHeight]="50" [footerHeight]="50" [scrollbarH]="true" (activate)="onActivate($event)"
    [sorts]="[{prop: 'serial_number', dir: 'asc'}]" *ngIf="workSheet.length > 0">
    <ngx-datatable-column name="Status" prop="status">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{row.status}}
        <!-- <div class="w-full h-full text-white text-center rounded-md ">
        </div> -->
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Serial Number" prop="serial_number">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{row.serial_number ||''}}
      </ng-template>
    </ngx-datatable-column>
    <!-- customer_name -->
    <!-- seller_name -->
    <!-- design_by -->
    <!-- date_of_acceptance -->
    <!-- data_of_submission -->
    <ngx-datatable-column name="ชื่อลูกค้า" prop="customer_name">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{row.customer_name ||''}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="ชื่อผู้ขาย" prop="seller_name">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{row.seller_name ||''}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="ผู้ออกแบบ" prop="design_by">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{row.design_by ||''}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="วันที่รับแบบ" prop="date_of_acceptance">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{row.date_of_acceptance ? formatTime(row.date_of_acceptance) : ''}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="วันที่ส่งแบบ" prop="data_of_submission">
      <ng-template let-row="row" ngx-datatable-cell-template>
        {{row.data_of_submission ? formatTime(row.data_of_submission) : ''}}
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="ACTION">
      <ng-template let-row="row" ngx-datatable-cell-template>
        <ion-text (click)="editWorkSheet(row)" color="danger" class="cursor-pointer">
          แก้ไข
        </ion-text>
      </ng-template>
    </ngx-datatable-column>
  </ngx-datatable>
</ion-content>